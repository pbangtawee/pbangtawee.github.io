<!DOCTYPE html>
<html>

<head>
    <title>TEST WEBPAGE</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100;300;400;700;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans Thai', sans-serif;
        }

        h1 {
            text-align: center;
            font-size: 40px;
        }

        p {
            text-align: center;
            font-size: 20px;
        }

        span {
            font-size: 30px;
        }
    </style>

</head>

<body>
    <h1>ระบบติดตามสภาพแวดล้อมภายในอาคาร</h1>

    <div id="data-container">
        <p>Temperature: <span id="temperature">Loading...</span> °C</p>
        <p>Humidity: <span id="humidity">Loading...</span> %</p>
        <br>
<<<<<<< HEAD
        <div style="text-align: center;">
            <iframe width="450" height="260" style="border: 1px solid #cccccc;"
                src="https://thingspeak.com/channels/1847137/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
            <iframe width="450" height="260" style="border: 1px solid #cccccc;"
                src="https://thingspeak.com/channels/1847137/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>

        </div>
=======
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1847137/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1847137/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
>>>>>>> ec1793c4c223fef5acb0ba6d0e5525f4c3604033

        <p></p>
        <p>Last Update: <span id="last-update">-</span></p>
    </div>

    <script>
        function fetchData() {
            // Replace 'YOUR_CHANNEL_ID' with your actual ThingSpeak channel ID
            const channelID = '1847137';
            const apiKey = 'MM691U9HHDHB384E'; // You can get this from your ThingSpeak account

            // Fetch the latest data from ThingSpeak
            fetch(`https://api.thingspeak.com/channels/${channelID}/feeds/last.json?api_key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    // Update the temperature and humidity values on the webpage
                    document.getElementById('temperature').textContent = data.field1;
                    document.getElementById('humidity').textContent = data.field2;

                    // Format and update the last update time
                    const lastUpdateTimestamp = new Date(data.created_at);
                    const lastUpdateTimeString = lastUpdateTimestamp.toLocaleString();
                    document.getElementById('lastUpdate').textContent = lastUpdateTimeString;
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Fetch data initially
        fetchData();

        // Set up an interval to fetch new data every 5 seconds (adjust as needed)
        setInterval(fetchData, 5000);
    </script>
</body>

</html>
