<!DOCTYPE html>
<html>

<head>
    <title>TEST WEBPAGE</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100;300;400;700;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans Thai', sans-serif;
        }
        h1 {
            text-align: center;
            font-size: 40px;
        }
        p {
            text-align: center;
            font-size: 20px;
        }
        span {
            font-size: 30px;
        }
    </style>

</head>

<body>
    <h1>ระบบติดตามสภาพแวดล้อมภายในอาคาร</h1>

    <div id="data-container">
        <p>Temperature: <span id="temperature">Loading...</span> °C</p>
        <p>Humidity: <span id="humidity">Loading...</span> %</p>
        <br>
        <p></p>
        <p>Last Update: <span id="last-update">-</span></p>
    </div>

    <script>
        function fetchData() {
            // Replace 'YOUR_CHANNEL_ID' with your actual ThingSpeak channel ID
            const channelID = '1847137';
            const apiKey = 'MM691U9HHDHB384E'; // You can get this from your ThingSpeak account

            // Fetch the latest data from ThingSpeak
            fetch(`https://api.thingspeak.com/channels/${channelID}/feeds/last.json?api_key=${apiKey}`)
                .then(response => response.json())
                .then(data => {
                    // Update the temperature and humidity values on the webpage
                    document.getElementById('temperature').textContent = data.field1;
                    document.getElementById('humidity').textContent = data.field2;
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Fetch data initially
        fetchData();

        // Set up an interval to fetch new data every 5 seconds (adjust as needed)
        setInterval(fetchData, 5000);
    </script>
</body>

</html>
