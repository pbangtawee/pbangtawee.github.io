<!DOCTYPE html>
<html>

<head>
    <title>TEST WEBPAGE</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100;300;400;700;900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans Thai', sans-serif;
        }
        h1 {
            text-align: center;
            font-size: 40px;
        }
        p {
            text-align: center;
            font-size: 20px;
        }
        span {
            font-size: 30px;
        }
    </style>

</head>

<body>
    <h1>ระบบติดตามสภาพแวดล้อมภายในอาคาร</h1>

    <div id="data-container">
        <p>Temperature: <span id="temperature">Loading...</span> °C</p>
        <p>Humidity: <span id="humidity">Loading...</span> %</p>
        <br>
        <p></p>
        <p>Last Update: <span id="last-update">-</span></p>
    </div>

    <script>
        function fetchData() {
            fetch('/json-endpoint') // Replace with the correct endpoint on your ESP32
                .then(response => response.json())
                .then(data => {
                    document.getElementById('temperature').textContent = data.temperature + " °C";
                    document.getElementById('humidity').textContent = data.humidity + " %";

                    // Display the last update time
                    const lastUpdate = new Date();
                    document.getElementById('last-update').textContent = lastUpdate.toLocaleString();
                })

                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        // Fetch data immediately when the page loads
        fetchData();

        // Optionally, you can set an interval to refresh the data periodically
        setInterval(fetchData, 10000); // Refresh every 10 seconds (adjust as needed)
    </script>
</body>

</html>